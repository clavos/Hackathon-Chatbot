{"version":3,"sources":["C:/Users/clavo/Documents/Travail/ESGI/4ème année/Hackathon/chatbot/src/$_gendir lazy","C:/Users/clavo/Documents/Travail/ESGI/4ème année/Hackathon/chatbot/src/app/app.component.css","C:/Users/clavo/Documents/Travail/ESGI/4ème année/Hackathon/chatbot/src/app/app.component.html","C:/Users/clavo/Documents/Travail/ESGI/4ème année/Hackathon/chatbot/src/app/app.component.ts","C:/Users/clavo/Documents/Travail/ESGI/4ème année/Hackathon/chatbot/src/app/app.module.ts","C:/Users/clavo/Documents/Travail/ESGI/4ème année/Hackathon/chatbot/src/app/chat.service.ts","C:/Users/clavo/Documents/Travail/ESGI/4ème année/Hackathon/chatbot/src/app/chat/chat.component.css","C:/Users/clavo/Documents/Travail/ESGI/4ème année/Hackathon/chatbot/src/app/chat/chat.component.html","C:/Users/clavo/Documents/Travail/ESGI/4ème année/Hackathon/chatbot/src/app/chat/chat.component.ts","C:/Users/clavo/Documents/Travail/ESGI/4ème année/Hackathon/chatbot/src/environments/environment.ts","C:/Users/clavo/Documents/Travail/ESGI/4ème année/Hackathon/chatbot/src/main.ts"],"names":[],"mappings":"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","file":"main.bundle.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"../../../../../src/$$_gendir lazy recursive\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Users/clavo/Documents/Travail/ESGI/4ème année/Hackathon/chatbot/src/$$_gendir lazy\n// module id = ../../../../../src/$$_gendir lazy recursive\n// module chunks = main","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Users/clavo/Documents/Travail/ESGI/4ème année/Hackathon/chatbot/src/app/app.component.css\n// module id = ../../../../../src/app/app.component.css\n// module chunks = main","module.exports = \"APP\\r\\n<app-chat></app-chat>\\r\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Users/clavo/Documents/Travail/ESGI/4ème année/Hackathon/chatbot/src/app/app.component.html\n// module id = ../../../../../src/app/app.component.html\n// module chunks = main","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.css']\r\n})\r\nexport class AppComponent {\r\n  title = 'app';\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// C:/Users/clavo/Documents/Travail/ESGI/4ème année/Hackathon/chatbot/src/app/app.component.ts","import { BrowserModule } from '@angular/platform-browser';\r\nimport { NgModule } from '@angular/core';\r\nimport {HttpModule} from '@angular/http';\r\n\r\nimport { AppComponent } from './app.component';\r\nimport { ChatComponent } from './chat/chat.component';\r\nimport {ChatService} from \"./chat.service\";\r\nimport {FormsModule} from \"@angular/forms\";\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent,\r\n    ChatComponent\r\n  ],\r\n  imports: [\r\n    BrowserModule,\r\n    FormsModule,\r\n    HttpModule\r\n  ],\r\n  providers: [ChatService],\r\n  bootstrap: [AppComponent]\r\n})\r\nexport class AppModule { }\r\n\n\n\n// WEBPACK FOOTER //\n// C:/Users/clavo/Documents/Travail/ESGI/4ème année/Hackathon/chatbot/src/app/app.module.ts","import { Injectable } from '@angular/core';\r\nimport {environment} from \"../environments/environment\";\r\nimport {ApiAiClient} from \"api-ai-javascript\";\r\nimport { Http, Headers } from '@angular/http';\r\nimport 'rxjs/add/operator/toPromise';\r\nimport 'rxjs/add/operator/catch';\r\nimport 'rxjs/add/operator/map';\r\nimport {Observable} from \"rxjs/Observable\";\r\nimport {BehaviorSubject} from \"rxjs/BehaviorSubject\";\r\n\r\n\r\nexport class Message {\r\n  constructor(public content: string, public sentBy: string){\r\n  }\r\n}\r\n\r\n@Injectable()\r\nexport class ChatService {\r\n\r\n  readonly token = environment.dialogflow.angularBot;\r\n  readonly client = new ApiAiClient({ accessToken: this.token });\r\n\r\n  conversation = new BehaviorSubject<Message[]>([]);\r\n\r\n  constructor(private http: Http) { }\r\n\r\n  update(msg: Message){\r\n    this.conversation.next([msg]);\r\n  }\r\n\r\n  converse(msg: string){\r\n    const userMessage = new Message(msg,'user');\r\n    this.update(userMessage);\r\n\r\n    return this.client.textRequest(msg)\r\n      .then(res => {\r\n        this.api_call(res.result)\r\n          .then(result => {\r\n\r\n\r\n            let details = JSON.parse(result._body);\r\n\r\n            for(let i=0;i<details.length;i++){\r\n              const botMessage = new Message(details[i].description, 'bot');\r\n              this.update(botMessage);\r\n            }\r\n\r\n            if(details.length <= 0){\r\n              const botMessage = new Message(res.result.fulfillment.speech, 'bot');\r\n              this.update(botMessage);\r\n            }\r\n\r\n          })\r\n          .catch(this.handleError);\r\n      })\r\n  }\r\n\r\n  api_call(details: any){\r\n\r\n    let request = '';\r\n\r\n    let data = {\r\n      \"start\": \"2018-03-10\",\r\n      \"categorie\": details.parameters[Object.keys(details.parameters)[0]],\r\n      \"end\": details.parameters.date,\r\n      \"localisation\": details.parameters.city\r\n    }\r\n\r\n    if(data.categorie){\r\n      request = 'http://localhost:8080/src/public/getActuCategorie';\r\n    }else{\r\n      request = 'http://localhost:8080/src/public/getActu';\r\n    }\r\n\r\n    return this.http.post(request, data)\r\n      .toPromise()\r\n      .then()\r\n      .catch(this.handleError);\r\n  }\r\n\r\n  private handleError(error: any): Promise<any> {\r\n    console.error('Erreur : ', error);\r\n    return Promise.reject(error.message || error);\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// C:/Users/clavo/Documents/Travail/ESGI/4ème année/Hackathon/chatbot/src/app/chat.service.ts","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Users/clavo/Documents/Travail/ESGI/4ème année/Hackathon/chatbot/src/app/chat/chat.component.css\n// module id = ../../../../../src/app/chat/chat.component.css\n// module chunks = main","module.exports = \"<p>\\r\\n  app chat\\r\\n</p>\\r\\n\\r\\n<div *ngFor=\\\"let message of messages | async\\\">\\r\\n  <div class=\\\"message\\\" [ngClass]=\\\"{'from': message.sentBy === 'bot', 'to': message.sentBy === 'user'}\\\">\\r\\n    {{message.content}}\\r\\n  </div>\\r\\n</div>\\r\\n<label for=\\\"msg\\\">Your message</label>\\r\\n<input [(ngModel)]=\\\"formValue\\\" (keyup.enter)=\\\"sendMessage()\\\" type=\\\"text\\\" id=\\\"msg\\\">\\r\\n<button (click)=\\\"sendMessage()\\\">Envoyer</button>\\r\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Users/clavo/Documents/Travail/ESGI/4ème année/Hackathon/chatbot/src/app/chat/chat.component.html\n// module id = ../../../../../src/app/chat/chat.component.html\n// module chunks = main","import { Component, OnInit } from '@angular/core';\r\n\r\nimport {ChatService, Message} from \"../chat.service\";\r\nimport {Observable} from \"rxjs/Observable\";\r\nimport 'rxjs/add/operator/scan';\r\n\r\n@Component({\r\n  selector: 'app-chat',\r\n  templateUrl: './chat.component.html',\r\n  styleUrls: ['./chat.component.css']\r\n})\r\nexport class ChatComponent implements OnInit {\r\n\r\n  messages: Observable<Message[]>;\r\n  formValue: string;\r\n\r\n  constructor(private ChatService: ChatService) { }\r\n\r\n  ngOnInit() {\r\n    this.messages = this.ChatService.conversation.asObservable().scan((acc,val) => acc.concat(val));\r\n  }\r\n\r\n  sendMessage() {\r\n    if(this.formValue != ''){\r\n      this.ChatService.converse(this.formValue);\r\n      this.formValue = '';\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// C:/Users/clavo/Documents/Travail/ESGI/4ème année/Hackathon/chatbot/src/app/chat/chat.component.ts","// The file contents for the current environment will overwrite these during build.\r\n// The build system defaults to the dev environment which uses `environment.ts`, but if you do\r\n// `ng build --env=prod` then `environment.prod.ts` will be used instead.\r\n// The list of which env maps to which file can be found in `.angular-cli.json`.\r\n\r\nexport const environment = {\r\n  production: false,\r\n\r\n  dialogflow: {\r\n    angularBot: 'b4582a7517514af3a490d2591755b5b1'\r\n  }\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// C:/Users/clavo/Documents/Travail/ESGI/4ème année/Hackathon/chatbot/src/environments/environment.ts","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => console.log(err));\r\n\n\n\n// WEBPACK FOOTER //\n// C:/Users/clavo/Documents/Travail/ESGI/4ème année/Hackathon/chatbot/src/main.ts"],"sourceRoot":"webpack:///"}